/* ===================================================================
   OTIMIZA√á√ïES ESPEC√çFICAS PARA 60 FPS
   ================================================================= */

/* 1. FOR√áAR GPU ACCELERATION */
.gpu-accelerated {
    transform: translateZ(0) !important;
    will-change: transform !important;
    backface-visibility: hidden !important;
    perspective: 1000px !important;
}

/* 2. OTIMIZAR LAYOUT THRASHING */
.layout-optimized {
    contain: layout style paint !important;
    will-change: auto !important;
}

/* 3. REDUZIR REPAINTS */
.repaint-optimized {
    transform: translateZ(0) !important;
    backface-visibility: hidden !important;
}

/* 4. OTIMIZAR ANIMA√á√ïES PARA 60 FPS */
@media (hover: hover) and (pointer: fine) {
    /* DESKTOP - Anima√ß√µes otimizadas para 60 FPS */
    .overview-card,
    .chart-card,
    .glass-btn,
    .table-btn {
        transition: transform 0.16s cubic-bezier(0.4, 0, 0.2, 1) !important;
        animation: none !important;
    }
    
    /* Hover otimizado */
    .overview-card:hover,
    .glass-btn:hover,
    .table-btn:hover {
        transform: translateY(-2px) translateZ(0) !important;
    }
    
    /* Chart.js otimizado */
    canvas {
        image-rendering: optimizeSpeed !important;
        image-rendering: -moz-crisp-edges !important;
        image-rendering: -webkit-optimize-contrast !important;
        image-rendering: optimize-contrast !important;
        -ms-interpolation-mode: nearest-neighbor !important;
    }
}

/* 5. REDUZIR COMPLEXIDADE DE RENDERIZA√á√ÉO */
.chart-container {
    contain: layout style paint !important;
    will-change: auto !important;
}

/* 6. OTIMIZAR SCROLL */
* {
    scroll-behavior: auto !important;
}

/* 7. REDUZIR SHADOWS PESADAS */
.overview-card,
.chart-card {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

/* 8. OTIMIZAR BACKDROP-FILTER */
@media (hover: hover) and (pointer: fine) {
    .glass-btn,
    .glass-table {
        backdrop-filter: none !important;
    }
}

/* 9. REDUZIR ANIMA√á√ïES DE CARREGAMENTO */
.chart-loading-overlay {
    animation: none !important;
}

.spinner {
    animation: spin 1s linear infinite !important;
}

/* 10. OTIMIZAR FONT RENDERING */
* {
    text-rendering: optimizeSpeed !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* ===================================================================
   EMERGENCY PATCH CSS - Corre√ß√µes Imediatas para FPS
   ================================================================= */
@media (hover: hover) and (pointer: fine) {
    /* DESKTOP ONLY - Aplicar otimiza√ß√µes seletivas */
    
    /* 1. DESABILITAR ANIMA√á√ïES PESADAS */
    .overview-card,
    .chart-card,
    .glass-btn,
    .table-btn {
        transition: none !important;
        animation: none !important;
        transform: none !important;
    }
    
    /* 2. OTIMIZAR BOX-SHADOW */
    .overview-card,
    .chart-card,
    .glass-btn,
    .table-btn {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
    }
    
    /* 3. DESABILITAR BACKDROP-FILTER */
    .glass-table,
    .glass-btn {
        backdrop-filter: none !important;
    }
    
    /* 4. OTIMIZAR HOVER EFFECTS */
    .overview-card:hover,
    .chart-card:hover,
    .glass-btn:hover,
    .table-btn:hover {
        transform: none !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
    }
    
    /* 5. DESABILITAR ANIMA√á√ïES DE CARREGAMENTO */
    .chart-loading-overlay {
        animation: none !important;
    }
    
    /* 6. MANTER ANIMA√á√ÉO DO SPINNER (importante para UX) */
    .spinner {
        animation: spin 2s linear infinite !important;
    }
    
    /* 7. OTIMIZAR CANVAS */
    canvas {
        image-rendering: optimizeSpeed !important;
        will-change: auto !important;
    }
    
    /* 8. OTIMIZAR SCROLL */
    ::-webkit-scrollbar {
        width: 6px !important;
    }
    
    /* 9. DESABILITAR ANIMA√á√ïES DE TABELA */
    .glass-table tbody tr {
        transition: none !important;
    }
    
    /* 10. OTIMIZAR LAYOUT THRASHING */
    .overview-card,
    .chart-card {
        transform: translateZ(0) !important;
        backface-visibility: hidden !important;
    }
    
    /* 11. DESABILITAR ANIMA√á√ïES PESADAS */
    .breathe-animation,
    .float-animation,
    .pulse-animation,
    .glow-animation,
    .shimmer-effect {
        animation: none !important;
    }
}

/* === MOBILE OPTIMIZATIONS (manter performance) === */
@media (hover: none) and (pointer: coarse) {
    /* MOBILE - Manter otimiza√ß√µes existentes */
    .overview-card:hover,
    .glass-btn:hover,
    .table-btn:hover {
        transform: none !important;
    }
    
    .glass-btn:active,
    .table-btn:active {
        transform: scale(0.95) !important;
        transition: transform 0.1s ease !important;
    }
}

/* === REDUCED MOTION SUPPORT === */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
        animation-delay: -0.01ms !important;
        transition-delay: -0.01ms !important;
    }
}

/* === PERFORMANCE MONITORING === */
.performance-debug {
    position: fixed;
    top: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.8);
    color: #fff;
    padding: 10px;
    border-radius: 5px;
    font-size: 12px;
    z-index: 9999;
    display: none;
}

.performance-debug.show {
    display: block;
}

/* === CRITICAL FIXES === */
/* Desabilitar apenas anima√ß√µes problem√°ticas, n√£o todas */
.overview-card,
.chart-card,
.glass-btn,
.table-btn {
    animation-play-state: running !important; /* Permitir anima√ß√µes importantes */
}

/* For√ßar GPU acceleration */
.gpu-accelerated {
    transform: translateZ(0) !important;
    will-change: transform !important;
    backface-visibility: hidden !important;
}

/* Otimizar paint layers */
.paint-optimized {
    contain: layout style paint !important;
    will-change: auto !important;
}

/* === SPECIFIC FIXES PARA ELEMENTOS PROBLEM√ÅTICOS === */

/* 1. Chart.js Canvas */
canvas {
    image-rendering: optimizeSpeed !important;
    image-rendering: -moz-crisp-edges !important;
    image-rendering: -webkit-optimize-contrast !important;
    image-rendering: optimize-contrast !important;
    -ms-interpolation-mode: nearest-neighbor !important;
}

/* 2. Tables */
.glass-table {
    border-collapse: separate !important;
    border-spacing: 0 !important;
}

.glass-table td,
.glass-table th {
    border: none !important;
    background: transparent !important;
}

/* 3. Cards */
.overview-card,
.chart-card {
    isolation: isolate !important;
    contain: layout style paint !important;
}

/* 4. Buttons */
.glass-btn,
.table-btn {
    user-select: none !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
}

/* === EMERGENCY OVERRIDES === */
/* Desabilitar apenas anima√ß√µes problem√°ticas em desktop */
@media (hover: hover) {
    /* Otimizar scroll */
    * {
        scroll-behavior: auto !important;
    }
    
    /* Otimizar renderiza√ß√£o */
    .chart-container {
        contain: layout style paint !important;
        will-change: auto !important;
    }
}

/* === DEBUG MODE === */
.debug-performance {
    outline: 2px solid red !important;
}

.debug-performance:hover {
    outline: 2px solid yellow !important;
} 

/* ===================================================================
   REDUZIR TAMANHO DOS T√çTULOS DOS GR√ÅFICOS
   ================================================================= */
.chart-title {
    font-size: 0.9rem !important;
    font-weight: 600 !important;
    color: var(--text-primary) !important;
    margin-bottom: 0.5rem !important;
    display: flex !important;
    align-items: center !important;
    gap: 0.5rem !important;
}

.chart-title::before {
    content: 'üìä' !important;
    font-size: 1rem !important;
}

/* Responsivo para mobile */
@media (max-width: 768px) {
    .chart-title {
        font-size: 0.8rem !important;
    }
    
    .chart-title::before {
        font-size: 0.9rem !important;
    }
}

/* ===================================================================
   MODAL OVERLAY - √öNICA FONTE DE VERDADE
   ================================================================= */
.modal-overlay {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    background: rgba(0, 0, 0, 0.8) !important;
    z-index: 999 !important;
    display: none !important;
    align-items: center !important;
    justify-content: center !important;
}

.modal-overlay.active {
    display: flex !important;
}

#expanded-chart.chart-card {
    position: relative !important;
    transform: none !important;
    width: 85vw !important;
    height: 75vh !important;
    max-width: 1400px !important;
    max-height: 700px !important;
    z-index: 1000 !important;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4) !important;
    background: rgba(15, 23, 42, 0.95) !important;
    border: 1px solid rgba(148, 163, 184, 0.2) !important;
    border-radius: 16px !important;
    padding: 1rem !important;
    box-sizing: border-box !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
    overflow: hidden !important;
    /* CENTRALIZA√á√ÉO PERFEITA */
    margin: auto !important;
    display: flex !important;
    flex-direction: column !important;
}

#expanded-chart .chart-container {
    height: calc(100% - 60px) !important;
    width: 100% !important;
    position: relative !important;
    margin: 0 !important;
    padding: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    /* CENTRALIZA√á√ÉO DO CONTAINER */
    align-items: center !important;
    justify-content: center !important;
}

#expanded-chart canvas {
    width: 100% !important;
    height: 100% !important;
    display: block !important;
    flex: 1 !important;
    min-height: 350px !important;
    /* CENTRALIZA√á√ÉO DO CANVAS */
    margin: auto !important;
}

body.modal-open {
    overflow: hidden !important;
}

/* ===================================================================
   CHART EXPANSION - BOT√ïES E POSICIONAMENTO
   ================================================================= */
.chart-card {
    position: relative !important;
    transition: none !important;
}

.expand-btn {
    background: rgba(30, 41, 59, 0.0) !important;
    border: none !important;
    color: #94a3b8 !important;
    cursor: pointer !important;
    font-size: 1rem !important;
    margin-right: 0.5rem !important;
    display: flex !important;
    align-items: center !important;
    transition: color 0.25s !important;
}

.expand-btn:hover {
    color: #f1f5f9 !important;
}

.chart-actions {
    position: absolute !important;
    bottom: 1rem !important;
    left: 1rem !important;
    z-index: 10 !important;
}

/* ===================================================================
   BOT√ÉO META - ESTILOS ESPEC√çFICOS
   ================================================================= */
.chart-card .chart-header .toggle-meta-btn,
.chart-card .chart-header .toggle-meta-btn.meta-hidden {
    background: rgba(59, 130, 246, 0.15) !important;
    color: #3b82f6 !important;
    border: none !important;
    border-radius: 8px !important;
    box-shadow: 0 2px 8px rgba(59,130,246,0.08) !important;
    backdrop-filter: blur(6px) !important;
    font-weight: 600 !important;
    font-size: 1rem !important;
    padding: 0.5rem 1.25rem !important;
    transition: background 0.2s, color 0.2s !important;
    display: flex !important;
    align-items: center !important;
    gap: 0.5rem !important;
}

.chart-card .chart-header .toggle-meta-btn.meta-hidden {
    background: rgba(100, 116, 139, 0.18) !important;
    color: #64748b !important;
    box-shadow: 0 2px 8px rgba(100,116,139,0.08) !important;
} 

/* ===== PATCH EMERGENCIAL - OTIMIZA√á√ÉO DE FPS DAS TABS ===== */

/* Desabilita anima√ß√µes pesadas que causam queda de FPS */
.tab-button {
  /* Remove anima√ß√µes complexas que causam rec√°lculo de layout */
  transition: opacity 0.2s ease-out !important;
  will-change: opacity !important;
  
  /* Remove transforma√ß√µes pesadas */
  transform: none !important;
  
  /* Remove box-shadow animado */
  box-shadow: none !important;
  
  /* Remove pseudo-elementos animados */
  position: static !important;
}

/* Remove pseudo-elementos que causam overhead */
.tab-button::before,
.tab-button::after {
  display: none !important;
}

/* Otimiza hover com apenas opacidade */
.tab-button:hover {
  opacity: 0.9 !important;
  background: rgba(255, 255, 255, 0.05) !important;
  transform: none !important;
  box-shadow: none !important;
}

/* Otimiza estado ativo */
.tab-button.active {
  opacity: 1 !important;
  background: rgba(59, 130, 246, 0.2) !important;
  transform: none !important;
  box-shadow: none !important;
}

.tab-button.active:hover {
  opacity: 0.95 !important;
  transform: none !important;
  box-shadow: none !important;
}

/* Remove anima√ß√µes de √≠cones */
.tab-button i {
  transition: none !important;
  transform: none !important;
}

.tab-button:hover i,
.tab-button.active i {
  transform: none !important;
}

/* Otimiza container das tabs */
.tabs-nav {
  /* Remove backdrop-filter pesado */
  backdrop-filter: none !important;
  
  /* Simplifica background */
  background: rgba(30, 41, 59, 0.3) !important;
  
  /* Remove box-shadow animado */
  box-shadow: none !important;
}

/* Otimiza container principal */
.tabs-container {
  /* Remove backdrop-filter pesado */
  backdrop-filter: none !important;
  
  /* Simplifica background */
  background: rgba(30, 41, 59, 0.5) !important;
  
  /* Remove box-shadow animado */
  box-shadow: none !important;
}

/* Remove anima√ß√µes de fade que causam repaint */
.tab-content {
  animation: none !important;
  transition: none !important;
}

/* Otimiza para dispositivos m√≥veis */
@media (hover: none) and (pointer: coarse) {
  .tab-button:hover {
    opacity: 1 !important;
    background: none !important;
  }
}

/* For√ßa otimiza√ß√£o de GPU */
.tab-button,
.tabs-nav,
.tabs-container {
  contain: layout style paint !important;
  will-change: auto !important;
}

/* Remove qualquer anima√ß√£o que possa estar causando problemas */
* {
  animation-duration: 0s !important;
  animation-delay: 0s !important;
}

/* Mant√©m apenas transi√ß√µes essenciais */
.tab-button {
  transition: opacity 0.15s ease-out !important;
}

/* ===== FIM DO PATCH EMERGENCIAL ===== */ 